---
#####################
### NON - SECRETS ###
#####################

# if using ZeroSSL
zerossl_eab_kid: "{{ u_vault_zerossl_eab_kid }}"

root_domain: "{{ u_vault_root_domain }}" # https://crt.sh/?q={{ root_domain }}
listmonk_site_name: "{{ u_vault_listmonk_site_name }}"
github_org: "{{ u_vault_github_org }}"

# ARC Github App
arc_github_app_installation_id: {{ u_vault_arc_github_app_installation_id }}
arc_github_app_app_id: {{ u_vault_arc_github_app_app_id }}

# ArgoCD Github App
argocd_github_app_installation_id: {{ u_vault_argocd_github_app_installation_id }}
argocd_github_app_app_id: {{ u_vault_argocd_github_app_app_id }}

## SENTRY ###
# SETTINGS FOR Github App (loosely based on https://docs.sentry.io/organization/integrations/source-code-mgmt/github/)
# Github App Name: <Whatever unique>
# Homepage URL: https://sentry.{{ root_domain }}
# Callback URL: https://sentry.{{ root_domain }}/auth/sso/
# Request user authorization (OAuth) during installation: CHECKED
# Webhook URL: https://sentry.{{ root_domain }}/extensions/github/webhook/
# Webhook Secret: 'openssl rand -base64 500 | tr -dc 'a-zA-Z0-9' | fold -w 64 | head -n 1'
# Event Subscriptions:
# - Pull request
# - Push
# Permissions:
#   AccountPermissions:
#     - Email addresses: RO
#   OrganizationPermissions:
#     - Members: RO
#   RepositoryPermissions:
#     - Administration: RO
#     - Contents: RO
#     - Issues: RW
#     - Metadata: RO
#     - Pull Requests: RW
#     - Webhooks: RW
sentry_github_appid: "{{ u_vault_sentry_github_appid }}"
sentry_github_appname: "{{ u_vault_sentry_github_appname }}"

#################
### SECRETS ! ###
#################

# https://docs.ansible.com/ansible/latest/tips_tricks/ansible_tips_tricks.html#keep-vaulted-variables-safely-visible
# requires an encrypted file named "vault"
# "ansible-vault encrypt ansible/inventories/production/group_vars/all/vault"
# "ansible-vault decrypt ansible/inventories/production/group_vars/all/vault"

# https://cert-manager.io/docs/configuration/acme/dns01/cloudflare/#api-tokens
# https://kubernetes-sigs.github.io/external-dns/v0.12.1/tutorials/cloudflare/#creating-cloudflare-credentials
# https://github.com/BojanZelic/cloudflare-zero-trust-operator?tab=readme-ov-file#token-permissions
# @below Cloudflare token config template (https://dash.cloudflare.com/profile/api-tokens)
## Authorizations: 
# Zone - DNS - Edit
# Zone - Zone - Read
# Access - Service Tokens - Edit
# Access - Organizations, Identity Providers, and Groups - Edit
# Access - Apps and Policies - Edit
## Zones: 
# Include - Specific Zone - {{ root_domain }}
cloudflare_account_id: "{{ vault_cloudflare_account_id }}"
cloudflare_api_token: "{{ vault_cloudflare_api_token }}"

# password for postmaster@{{ root_domain }}
orguser_postmaster_password: "{{ vault_orguser_postmaster_password }}"
orguser_donotreply_password: "{{ vault_orguser_donotreply_password }}"

# password for "admin" user on Hashicorp Vault
hc_vault_admin_password: "{{ vault_hc_vault_admin_password }}"

### MAKE SURE GITHUB APP HAS BELOW RIGHTS
# https://docs.github.com/en/actions/hosting-your-own-runners/managing-self-hosted-runners-with-actions-runner-controller/authenticating-to-the-github-api
arc_github_app_priv_key: "{{ vault_arc_github_app_priv_key }}"

### MAKE SURE GITHUB APP HAS BELOW RIGHTS
# https://argo-cd.readthedocs.io/en/stable/user-guide/private-repositories/#github-app-credential
# https://argo-cd.readthedocs.io/en/stable/operator-manual/notifications/services/github/
argocd_github_app_priv_key: "{{ vault_argocd_github_app_priv_key }}"

# https://argo-cd.readthedocs.io/en/latest/operator-manual/webhook/
argocd_github_webhook_secret: "{{ vault_argocd_github_webhook_secret }}"

#
grafana_admin_pwd: "{{ vault_grafana_admin_pwd }}"

#
openldap_stack__ldap_admin_pwd: "{{ vault_openldap_stack__ldap_admin_pwd }}"
openldap_stack__lam_password: "{{ vault_openldap_stack__lam_password }}"
openldap_stack__ssp_keyphrase: "{{ vault_openldap_stack__ssp_keyphrase }}"

#
listmonk_admin_password: "{{ vault_listmonk_admin_password }}"

#
matomo_password: "{{ vault_matomo_password }}"

# 12 characters min
portainer_admin_password: "{{ vault_portainer_admin_password }}"

# need to allow secrets and variables updates on organization level
ansible_github_var_secrets_pat: "{{ vault_ansible_github_var_secrets_pat }}"

#
zerossl_eab_hmac_key: "{{ vault_zerossl_eab_hmac_key }}"

# minimum 8 chars
minio_tenant_password: "{{ vault_minio_tenant_password }}"
minio_secret_access_key: "{{ minio_tenant_password }}"

#
sentry_github_clientId: "{{ vault_sentry_github_clientId }}"
sentry_github_clientSecret: "{{ vault_sentry_github_clientSecret }}"
sentry_github_privateKey: "{{ vault_sentry_github_privateKey }}"
sentry_github_webhookSecret: "{{ vault_sentry_github_webhookSecret }}"

sentry_usermail_password: "{{ vault_sentry_usermail_password }}"
