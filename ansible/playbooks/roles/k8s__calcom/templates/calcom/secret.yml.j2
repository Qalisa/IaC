apiVersion: v1
kind: Secret
metadata:
  name: "{{ k8s__calcom__app__name }}"
  namespace: "{{ k8s__calcom__namespace }}"
stringData:
  #
  DATABASE_URL: postgresql://{{ k8s__calcom__postgres__db_user }}:{{ k8s__calcom__postgres__db_password }}@{{ k8s__calcom__postgres__internal_hostname }}/{{ k8s__calcom__postgres__db_name }}
  NEXT_PUBLIC_WEBAPP_URL: https://{{ k8s__calcom__external_hostname }}
  NEXT_PUBLIC_API_V2_URL: https://{{ k8s__calcom__external_hostname }}/api/v2

  # It is highly recommended that the NEXTAUTH_SECRET must be overridden and very unique
  # Use `openssl rand -base64 32` to generate a key
  NEXTAUTH_SECRET: "{{ calcom__auth_secret }}"

  # Encryption key that will be used to encrypt CalDAV credentials, choose a random string, for example with `dd if=/dev/urandom bs=1K count=1 | md5sum`
  CALENDSO_ENCRYPTION_KEY: "{{ calcom__calendso_encryption_key }}"

  #
  NEXT_PUBLIC_COMPANY_NAME: "{{ iac__ldap_org }}"
  NEXT_PUBLIC_APP_NAME: "Cal.com - {{ iac__ldap_org }}"
  NEXT_PUBLIC_SUPPORT_MAIL_ADDRESS: "{{ iac__postmaster_email }}"
  NEXT_PUBLIC_DISABLE_SIGNUP: 'true'

  #
  NEXTAUTH_ENABLED: "true"
  NEXTAUTH_URL: https://{{ k8s__calcom__external_hostname }}
  OIDC_CLIENT_ID: "{{ k8s__calcom__dex__oidc_id}}"
  OIDC_CLIENT_SECRET: "{{ k8s__calcom__dex__oidc_secret }}"
  OIDC_ISSUER: http://{{ k8s__calcom__dex__internal_hostname }}

  #
  CALCOM_TELEMETRY_DISABLED: '1'

  #
  ALLOWED_HOSTNAMES: '"{{ k8s__calcom__external_hostname }}"'

  #
  # Configures the global From: header whilst sending emails.
  EMAIL_FROM: "{{ iac__donotreply_email }}"
  EMAIL_FROM_NAME: "{{ iac__donotreply_email }}"

  # Configure SMTP settings
  EMAIL_SERVER_HOST: "{{ docker_mailserver__internal_smtp_server }}"
  EMAIL_SERVER_PORT: "{{ docker_mailserver__internal_smtp_preferred_port }}"
  EMAIL_SERVER_USER: "{{ iac__donotreply_username }}"
  EMAIL_SERVER_PASSWORD: "{{ iac__donotreply_password }}"
