###
### Based on https://raw.githubusercontent.com/argoproj/argo-cd/stable/notifications_catalog/install.yaml
###
trigger.on-deployed: |
  - description: Application is synced and healthy. Triggered once per commit.
    oncePer: app.status.operationState?.syncResult?.revision
    send:
      - app-deployed
    when: app.status.operationState != nil and app.status.operationState.phase in ['Succeeded'] and app.status.health.status == 'Healthy'
trigger.on-sync-failed: |
  - description: Application syncing has failed
    send:
      - app-sync-failed
    when: app.status.operationState != nil and app.status.operationState.phase in ['Error', 'Failed']
trigger.on-sync-running: |
  - description: Application is being synced
    send:
      - app-sync-running
    when: app.status.operationState != nil and app.status.operationState.phase in ['Running']
trigger.on-sync-status-unknown: |
  - description: Application status is 'Unknown'
    send:
      - app-sync-status-unknown
    when: app.status.sync.status == 'Unknown'
trigger.on-sync-succeeded: |
  - description: Application syncing has succeeded
    send:
      - app-sync-succeeded
    when: app.status.operationState != nil and app.status.operationState.phase in ['Succeeded']